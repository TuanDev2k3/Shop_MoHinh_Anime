let listProduct = [
    // One Piece
    {
        name: "Mô Hình Monkey D Luffy Gear 5 Nika Cầm Tia Sét Cao 46cm - Mô hình One Piece",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-ljrxq52sppmqf8",
        type: "One Piece",
        price: "1249000"
    },
    {
        name: "Mô hình Ace Hỏa Quyền Chiến Đấu, Có Led, Cao 30 cm - Mô hình OnePiece",
        image: "https://down-vn.img.susercontent.com/file/cn-11134207-7qukw-lj9o1lz56ut676",
        type: "One Piece",
        price: "2519000"
    },
    {
        name: "Mô hình Mô hình Sanji Máu Nóng cực cháy, Có Led, Cao 48 cm - Mô hình OnePiece",
        type: "One Piece",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-leyinzetupai1f",
        price: "1330000"
    },
    {
        name: "Mô Hình Đô Đốc Aokiji Chiến Đấu Cực Đẹp, Cao 46cm - Mô hình One Piece",
        image: "https://down-vn.img.susercontent.com/file/cn-11134207-7qukw-lj9numhrh856cc",
        type: "One Piece",
        price: "510000"
    },
    {
        name: "Mô hình Zoro Wano trên mái nhà, Có bản LED, cao 22 cm, có hộp màu",
        image: "https://down-vn.img.susercontent.com/file/vn-11134201-7qukw-leu6gze6mkqyab",
        type: "One Piece",
        price: "2419000"
    },
    {
        name: "Mô hình Sanji đen bản cao cấp, cao 36cm nặng 1.6kg - Mô hình OnePiece",
        image: "https://down-vn.img.susercontent.com/file/sg-11134201-22090-7e8zsqqqwyhv8e",
        type: "One Piece",
        price: "480000"
    },
    {
        name: "Mô Hình G5 Fourth Gear Luffy Great Ape King Gun Mingge Battle Chapter Trong One Piece",
        image: "https://down-vn.img.susercontent.com/file/sg-11134201-23030-sai1phtv46nv3b",
        type: "One Piece",
        price: "960000"
    },
    {
        name: "Mô hình King bách thú 2 đầu cao 33cm băng kaido Trong One Piece - Nghiện mô hình đẹp",
        image: "https://down-vn.img.susercontent.com/file/sg-11134201-7qvfp-lfc48difv824f8",
        type: "One Piece",
        price: "1549000"
    },
    // Naruto
    {
        name: "Mô hình Kakashi Có Sharingan Siêu Ngầu - Mô hình nhân vật anime Naruto",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-lixoefhddcyae6",
        type: "Naruto",
        price: "560000"
    },
    {
        name: " Mô hình Minato Phong Ấn Cửu Vĩ Hồ Ly - Mô hình nhân vật anime Naruto",
        image: "https://down-vn.img.susercontent.com/file/75de7eeeab624aa9f2ed9dda6ae8d392",
        type: "Naruto",
        price: "490000"
    },
    {
        name: "Mô Hình Naruto Lục Đạo Tiên Nhân Cửu Vĩ Phát Sáng - Mô hình nhân vật anime Naruto",
        image: "https://down-vn.img.susercontent.com/file/2446d2f9373ef2a0e9cb1fc3a073a747",
        type: "Naruto",
        price: "2250000"
    },
    {
        name: "Siêu Phẩm Mô Hình Sasuke Susanoo Có LED - Mô Hình Naruto Anime ",
        image: "https://cf.shopee.vn/file/8c293f9c8be56882a3ca6e2b61de2fb4",
        type: "Naruto",
        price: "1215000"
    },
    {
        name: "Mô Hình Nhân Vật Uchiha Shisui Manga Naruto Gk Sharingan Susanoo 25cm Bằng Pvc",
        image: "https://down-vn.img.susercontent.com/file/cn-11134207-7qukw-ljwfu0ckh7905d",
        type: "Naruto",
        price: "624000"
    },
    {
        name: "Mô hình Uchiha Itachi Susano - Naruto có Led to 36cm - Đam mê Mô Hình Naruto",
        image: "https://down-vn.img.susercontent.com/file/a8ea7dda772ce47cd607b4cf14087d0f",
        type: "Naruto",
        price: "1800000"
    },
    {
        name: "Mô hình nhân vật Jiraiya triệu hồi Cóc Tiên Nhân trong Naruto - Mô hình Đẹp",
        image: "https://down-vn.img.susercontent.com/file/1e6946e9199a90232d414774ac0de5a1",
        type: "Naruto",
        price: "780000"
    },
    {
        name: "Mô hình Uchiha Madara Susano có Led to 56cm - Naruto Mô Hình PVC",
        image: "https://down-vn.img.susercontent.com/file/cn-11134207-7qukw-livar2aiiu0q66",
        type: "Naruto",
        price: "2190000"
    },
    
    // Dragon Ball
    {
        name: "Mô hình Dragon Ball goku bản năng vô cực Super Saiyan - Mô hình Trang trí Anime",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-ljr3jtrfko8kb8",
        type: "Dragon Ball",
        price: "2050000"
    },
    {
        name: "Mô hình Dragon Ball Songoku sử dụng Quả cầu Kinh Khi - Mô hình Anime Dragon",
        image: "https://down-vn.img.susercontent.com/file/sg-11134201-7qvfw-ljmp86xrn78r2a",
        type: "Dragon Ball",
        price: "3140000"
    },
    {
        name: "Mô hình Cao Cấp Son GoKu Black Rose Cao 36cm Và Lưỡi Hái Siêu To Cực Nét ",
        image: "https://down-vn.img.susercontent.com/file/vn-11134201-23030-4kdsxx24rhovdb",
        type: "Dragon Ball",
        price: "1120000"
    },
    {
        name: "Mô hình songoku bản nặng vô cực hàng nét siêu chất - Mô hình Anime Dragon",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-ljx20oekl0jm63",
        type: "Dragon Ball",
        price: "5290000"
    },
    {
        name: "Mô Hình Cao Cấp Vegeta Chiến Đấu 3 Đầu Thay Thế Cao 41 cm Có LED - Mô Hình Dragon Ball Super",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-ljthz5zjyit03e",
        type: "Dragon Ball",
        price: "1340000"
    },
    {
        name: "Mô hình Vegeta Bản Ngã Tối Thượng Ultra Ego cực nét - Figure Dragon Ball",
        image: "https://down-vn.img.susercontent.com/file/8f982a1586c91ab58ece9ffd4a4c3eb8",
        type: "Dragon Ball",
        price: "639000"
    },
    {
        name: "Mô hình 3D Beerus có LED, nhìn cực chiến, cao 50 cm - Figure Dragon Ball",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-lgg78vdhxs2y82",
        type: "Dragon Ball",
        price: "915000"
    },
    {
        name: "Mô hình Kid Buu có base cao 30cm, majin buu siêu nét - Mô hình dragon ball",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7qukw-lk6puj3myi7o0d",
        type: "Dragon Ball",
        price: "550000"
    },
]

// Load product tu list vao website
RanDomProduct()
PageIndex(1)

function RanDomProduct() {
    let index, temp, length = listProduct.length

    while (length > 0) {
        index = Math.floor(Math.random() * length)
        length--

        // Hoan doi vi tri product
        temp = listProduct[index]
        listProduct[index] = listProduct[length]
        listProduct[length] = temp
    }
    return listProduct
}

function AddProduct(product) {
    let proItem = document.createElement('div')
    proItem.className = 'bg-white shadow-[0_0_15px_#bbb] max-h-[330px] hover:shadow-[0px_0px_10px_#454545] animate-[fadeIn_.5s_linear] duration-300 relative'
    proItem.innerHTML = `
            <div class="w-full max-h-[200px] overflow-hidden">
                <img src="${product.image}" 
                    class="w-full h-full object-cover object-top scale-100 hover:scale-125 duration-500">
            </div>
            <h3 class="mb-4 mt-2 px-2 text-base cursor-pointer line-clamp-2">${product.name}</h3>
            <h4 class="px-2 pb-3 pt-4 text-[17px] border-t border-[#aaa] font-bold text-[#ff0000]">${FormatPrice(product.price)}₫</h4>
            <i class='bx bxs-plus-circle md:text-[32px] text-[28px] text-green-600 absolute bottom-[10px] right-2 cursor-pointer' title="Add To Cart"></i>`
    
    
    document.getElementById('products').appendChild(proItem)
}

function FormatPrice(n) {
    return n.replace(/\B(?=(\d{3})+(?!\d))/g, '.')
}

function PageIndex(n) {
    // Remove all Product
    let content = document.getElementById('products')
    while(content.hasChildNodes()){
        content.removeChild(content.firstChild);
    }
    // load product theo page
    let index = (n-1)*12
    while (index < n*12 && listProduct[index]) {
        AddProduct(listProduct[index])
        index++
    }
    // Create Page Icon
    PageIcon()
}

function PageIcon() {
    let pageIcon = document.createElement('div')
    pageIcon.className = 'md:text-[40px] text-[30px] col-span-full text-right cursor-pointer'
    pageIcon.innerHTML = `<button class="border-none outline-none mx-3 text-blue-600 hover:text-white" onclick="PageIndex('1')">
                        <a href="#"><i class='bx bx-chevron-left rounded-full border-2 border-blue-500 hover:bg-blue-400 duration-500'></i></a></button>
                        <button class="border-none outline-none mx-3 text-blue-600 hover:text-white" onclick="PageIndex('2')">
                        <a href="#"><i class='bx bx-chevron-right rounded-full border-2 border-blue-500 hover:bg-blue-400 duration-500'></i></a></button>`
    document.getElementById('products').appendChild(pageIcon)
}

// Sort theo Type
function SortType(type) {
    let content = document.getElementById('products')
    while(content.hasChildNodes()){
        content.removeChild(content.firstChild);
    }
    listProduct.forEach(product => {
        if (type === product.type)
            AddProduct(product)
    })

    if (type === "All") {
        PageIndex(1)
    }
}
// Sort theo Price (Gia)
function SortPrice(price){
    let content = document.getElementById('products')
    while(content.hasChildNodes()){
        content.removeChild(content.firstChild);
    }
    switch (price){
        case "-1tr": {
            listProduct.forEach(product => {
                let price = parseInt(product.price)
                if (price < 1000000)
                    AddProduct(product)
            })
            break
        }
        case "-2tr": {
            listProduct.forEach(product => {
                let price = parseInt(product.price)
                if (price >= 1000000 && price < 2000000)
                    AddProduct(product)
            })
            break
        }
        case "+2tr": {
            listProduct.forEach(product => {
                let price = parseInt(product.price)
                if (price >= 2000000)
                    AddProduct(product)
            })
            break
        }
        case "price++": {
            listProduct.sort((a,b) => (a.price-b.price));
            PageIndex(1)
            break
        }
        case "price--": {
            listProduct.sort((a,b) => (b.price-a.price));
            PageIndex(1)
            break
        }

    }
}

// Open and Close Box Sort => Reponsive
let sortBox = document.getElementById('sort')
document.getElementById('sortIcon').addEventListener("click", function(){
    sortBox.classList.add('open')
})
sortBox.addEventListener('mousedown', function(){
    setTimeout(function(){
        sortBox.classList.remove('open')
    }, 100)
        
})
